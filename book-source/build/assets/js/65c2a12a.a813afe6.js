"use strict";(globalThis.webpackChunkai_book=globalThis.webpackChunkai_book||[]).push([[102],{3060:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>t,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"Gazebo-Simulation/building-robot","title":"Lesson 3: Building Your First Robot","description":"Design and build a differential drive mobile robot, spawn in Gazebo, and command motion","source":"@site/docs/03-Gazebo-Simulation/03-building-robot.md","sourceDirName":"03-Gazebo-Simulation","slug":"/Gazebo-Simulation/building-robot","permalink":"/docs/Gazebo-Simulation/building-robot","draft":false,"unlisted":false,"editUrl":"https://github.com/your-org/ai-book/tree/main/docs/03-Gazebo-Simulation/03-building-robot.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4,"title":"Lesson 3: Building Your First Robot","description":"Design and build a differential drive mobile robot, spawn in Gazebo, and command motion"},"sidebar":"tutorialSidebar","previous":{"title":"Lesson 2: URDF Robot Modeling Basics","permalink":"/docs/Gazebo-Simulation/urdf-basics"},"next":{"title":"Lesson 4: Physics Simulation Tuning","permalink":"/docs/Gazebo-Simulation/physics-simulation"}}');var s=i(4848),l=i(8453);const o={sidebar_position:4,title:"Lesson 3: Building Your First Robot",description:"Design and build a differential drive mobile robot, spawn in Gazebo, and command motion"},t="Lesson 3: Building Your First Robot (75 minutes)",a={},d=[{value:"Learning Outcomes",id:"learning-outcomes",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Core Concepts (8 Total)",id:"core-concepts-8-total",level:2},{value:"1. Mobile Base Design",id:"1-mobile-base-design",level:3},{value:"2. Differential Drive Kinematics",id:"2-differential-drive-kinematics",level:3},{value:"3. Wheel Configuration",id:"3-wheel-configuration",level:3},{value:"4. Base Link Positioning",id:"4-base-link-positioning",level:3},{value:"5. Caster Wheel Design",id:"5-caster-wheel-design",level:3},{value:"6. Joint Controller Configuration",id:"6-joint-controller-configuration",level:3},{value:"7. Physics for Mobile Robots",id:"7-physics-for-mobile-robots",level:3},{value:"8. Spawning in Gazebo",id:"8-spawning-in-gazebo",level:3},{value:"Layer 1: Manual Exercise - Build and Spawn",id:"layer-1-manual-exercise---build-and-spawn",level:2},{value:"Exercise: Create Differential Drive Robot URDF",id:"exercise-create-differential-drive-robot-urdf",level:3},{value:"Code Example: Complete Differential Drive Robot",id:"code-example-complete-differential-drive-robot",level:2},{value:"Code Example: Spawn in Gazebo (Python)",id:"code-example-spawn-in-gazebo-python",level:2},{value:"Layer 2: AI Collaboration Notes",id:"layer-2-ai-collaboration-notes",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Problem: Robot doesn&#39;t move when wheels spin",id:"problem-robot-doesnt-move-when-wheels-spin",level:3},{value:"Problem: Robot tips over easily",id:"problem-robot-tips-over-easily",level:3},{value:"Problem: Caster wheel gets stuck or wobbles",id:"problem-caster-wheel-gets-stuck-or-wobbles",level:3},{value:"Problem: &quot;URDF model &#39;robot&#39; doesn&#39;t have inertial element in root link&quot;",id:"problem-urdf-model-robot-doesnt-have-inertial-element-in-root-link",level:3},{value:"Problem: Wheels penetrate ground plane",id:"problem-wheels-penetrate-ground-plane",level:3},{value:"Problem: Robot spins in circles instead of moving straight",id:"problem-robot-spins-in-circles-instead-of-moving-straight",level:3},{value:"Problem: Can&#39;t spawn robot\u2014&quot;Entity already exists&quot;",id:"problem-cant-spawn-robotentity-already-exists",level:3},{value:"Self-Assessment Checklist",id:"self-assessment-checklist",level:2},{value:"Key Takeaways",id:"key-takeaways",level:2},{value:"Next Lesson",id:"next-lesson",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"lesson-3-building-your-first-robot-75-minutes",children:"Lesson 3: Building Your First Robot (75 minutes)"})}),"\n",(0,s.jsx)(n.h2,{id:"learning-outcomes",children:"Learning Outcomes"}),"\n",(0,s.jsx)(n.p,{children:"By the end of this lesson, you will:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Understand differential drive kinematics and design principles"}),"\n",(0,s.jsx)(n.li,{children:"Design a mobile robot with base link and wheels"}),"\n",(0,s.jsx)(n.li,{children:"Create complete URDF for a mobile robot with all physics properties"}),"\n",(0,s.jsx)(n.li,{children:"Spawn the robot in Gazebo and verify physical behavior"}),"\n",(0,s.jsx)(n.li,{children:"Command robot motion via ROS 2 Twist messages"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Lesson 2 completed (URDF basics)"}),"\n",(0,s.jsx)(n.li,{children:"Understanding of robot kinematics basics"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"core-concepts-8-total",children:"Core Concepts (8 Total)"}),"\n",(0,s.jsx)(n.h3,{id:"1-mobile-base-design",children:"1. Mobile Base Design"}),"\n",(0,s.jsx)(n.p,{children:"A mobile base consists of:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Base link"}),": Main robot body (box shape, center of mass)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Wheels"}),": Two or more actuated links for motion"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Caster wheel"})," (optional): Free-rolling wheel for balance"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Typical mobile robot geometry:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"        front\r\n    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\r\n    \u2502  base_link \u2502\r\n    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\r\n   left_wheel right_wheel\n"})}),"\n",(0,s.jsx)(n.h3,{id:"2-differential-drive-kinematics",children:"2. Differential Drive Kinematics"}),"\n",(0,s.jsx)(n.p,{children:"Two wheels, independently controlled. The robot moves by:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Both wheels forward"})," \u2192 robot moves forward"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Left wheel faster"})," \u2192 robot turns right"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Opposite wheel speeds"})," \u2192 robot spins in place"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Kinematics equations:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"v_linear = (v_left + v_right) / 2\r\nv_angular = (v_right - v_left) / wheelbase\n"})}),"\n",(0,s.jsx)(n.p,{children:"Where:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"v_left"}),", ",(0,s.jsx)(n.code,{children:"v_right"})," = wheel velocities"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"wheelbase"})," = distance between wheels"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"v_linear"})," = forward speed"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"v_angular"})," = rotation speed"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"3-wheel-configuration",children:"3. Wheel Configuration"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Wheel parameters"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Radius"}),": Affects distance traveled per rotation (0.05 m typical)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Width"}),": Affects traction and friction"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Mass"}),": Should be 5-10% of total robot mass"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Position"}),": Must be symmetric for balanced drive"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"4-base-link-positioning",children:"4. Base Link Positioning"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"base_link"})," should be:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"At center of mass"}),": For realistic physics"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Low on the robot"}),": Improves stability"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Surrounded by collision geometry"}),": Prevents falling through ground"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"5-caster-wheel-design",children:"5. Caster Wheel Design"}),"\n",(0,s.jsx)(n.p,{children:"A free-rolling wheel mounted on a swivel:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Prevents tipping when moving in arcs"}),"\n",(0,s.jsx)(n.li,{children:"Reduces friction compared to skid steering"}),"\n",(0,s.jsx)(n.li,{children:"Common on small mobile robots (TurtleBot, differential drive platforms)"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"6-joint-controller-configuration",children:"6. Joint Controller Configuration"}),"\n",(0,s.jsx)(n.p,{children:"Wheels need effort-controlled joints (motors):"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:'<joint type="continuous">  \x3c!-- Unlimited rotation --\x3e\r\n  <limit effort="10" velocity="2.0"/>  \x3c!-- Max motor torque and speed --\x3e\r\n</joint>\n'})}),"\n",(0,s.jsx)(n.h3,{id:"7-physics-for-mobile-robots",children:"7. Physics for Mobile Robots"}),"\n",(0,s.jsx)(n.p,{children:"Key parameters:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Friction"}),": Wheels need high friction (0.8-1.0) for traction"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Damping"}),": Wheels benefit from low damping (0.01-0.05)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Contact"}),": Ground contact must be rock-solid (no hovering)"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"8-spawning-in-gazebo",children:"8. Spawning in Gazebo"}),"\n",(0,s.jsx)(n.p,{children:"Robots are spawned via ROS 2 service or launch file:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Via command line\r\nros2 service call /spawn_entity gazebo_msgs/SpawnEntity \"{name: 'robot1', xml: '<robot>...'}\"\r\n\r\n# Via launch file\r\nIncludeLaunchDescription(PythonLaunchDescriptionSource(['gazebo_ros', 'launch', 'gazebo.launch.py']))\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"layer-1-manual-exercise---build-and-spawn",children:"Layer 1: Manual Exercise - Build and Spawn"}),"\n",(0,s.jsx)(n.h3,{id:"exercise-create-differential-drive-robot-urdf",children:"Exercise: Create Differential Drive Robot URDF"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Design the geometry"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Base: 0.2m length \xd7 0.15m width \xd7 0.1m height"}),"\n",(0,s.jsx)(n.li,{children:"Wheels: 0.05m radius, mounted at \xb10.075m from center Y"}),"\n",(0,s.jsx)(n.li,{children:"Caster wheel: 0.01m radius at front"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Create URDF"})," with:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"base_link"})," (box collision shape)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"left_wheel"})," and ",(0,s.jsx)(n.code,{children:"right_wheel"})," (cylinder shapes)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"caster_wheel"})," (sphere)"]}),"\n",(0,s.jsx)(n.li,{children:"Joints connecting all parts"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Set physics parameters"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Base mass: 5 kg"}),"\n",(0,s.jsx)(n.li,{children:"Each wheel mass: 0.3 kg"}),"\n",(0,s.jsx)(n.li,{children:"Caster mass: 0.1 kg"}),"\n",(0,s.jsx)(n.li,{children:"Friction: 0.9 (high for traction)"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Visualize in RViz"})," to verify structure"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"code-example-complete-differential-drive-robot",children:"Code Example: Complete Differential Drive Robot"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"File"}),": ",(0,s.jsx)(n.code,{children:"examples/chapter-2-gazebo/lesson-03/differential-drive-robot.urdf"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0"?>\r\n<robot name="differential_drive_robot">\r\n  \x3c!-- Simulation environment: Gazebo 11+ --\x3e\r\n\r\n  \x3c!-- Ground Link (fixed to world) --\x3e\r\n  <link name="world"/>\r\n\r\n  \x3c!-- Base Link (main robot body) --\x3e\r\n  <link name="base_link">\r\n    <inertial>\r\n      <mass value="5.0"/>\r\n      <origin xyz="0 0 0" rpy="0 0 0"/>\r\n      <inertia ixx="0.5" ixy="0" ixz="0"\r\n               iyy="0.5" iyz="0" izz="0.4"/>\r\n    </inertial>\r\n    <visual>\r\n      <origin xyz="0 0 0" rpy="0 0 0"/>\r\n      <geometry>\r\n        <box size="0.2 0.15 0.1"/>\r\n      </geometry>\r\n      <material name="base_color">\r\n        <color rgba="0.7 0.7 0.7 1"/>\r\n      </material>\r\n    </visual>\r\n    <collision>\r\n      <origin xyz="0 0 0" rpy="0 0 0"/>\r\n      <geometry>\r\n        <box size="0.2 0.15 0.1"/>\r\n      </geometry>\r\n    </collision>\r\n  </link>\r\n\r\n  \x3c!-- Left Wheel --\x3e\r\n  <link name="left_wheel">\r\n    <inertial>\r\n      <mass value="0.3"/>\r\n      <origin xyz="0 0 0" rpy="1.5708 0 0"/>\r\n      <inertia ixx="0.01" ixy="0" ixz="0"\r\n               iyy="0.01" iyz="0" izz="0.01"/>\r\n    </inertial>\r\n    <visual>\r\n      <origin xyz="0 0 0" rpy="1.5708 0 0"/>\r\n      <geometry>\r\n        <cylinder radius="0.05" length="0.05"/>\r\n      </geometry>\r\n      <material name="wheel_color">\r\n        <color rgba="0.2 0.2 0.2 1"/>\r\n      </material>\r\n    </visual>\r\n    <collision>\r\n      <origin xyz="0 0 0" rpy="1.5708 0 0"/>\r\n      <geometry>\r\n        <cylinder radius="0.05" length="0.05"/>\r\n      </geometry>\r\n    </collision>\r\n  </link>\r\n\r\n  \x3c!-- Right Wheel --\x3e\r\n  <link name="right_wheel">\r\n    <inertial>\r\n      <mass value="0.3"/>\r\n      <origin xyz="0 0 0" rpy="1.5708 0 0"/>\r\n      <inertia ixx="0.01" ixy="0" ixz="0"\r\n               iyy="0.01" iyz="0" izz="0.01"/>\r\n    </inertial>\r\n    <visual>\r\n      <origin xyz="0 0 0" rpy="1.5708 0 0"/>\r\n      <geometry>\r\n        <cylinder radius="0.05" length="0.05"/>\r\n      </geometry>\r\n      <material name="wheel_color"/>\r\n    </visual>\r\n    <collision>\r\n      <origin xyz="0 0 0" rpy="1.5708 0 0"/>\r\n      <geometry>\r\n        <cylinder radius="0.05" length="0.05"/>\r\n      </geometry>\r\n    </collision>\r\n  </link>\r\n\r\n  \x3c!-- Caster Wheel --\x3e\r\n  <link name="caster_wheel">\r\n    <inertial>\r\n      <mass value="0.1"/>\r\n      <origin xyz="0 0 0" rpy="0 0 0"/>\r\n      <inertia ixx="0.001" ixy="0" ixz="0"\r\n               iyy="0.001" iyz="0" izz="0.001"/>\r\n    </inertial>\r\n    <visual>\r\n      <origin xyz="0 0 0" rpy="0 0 0"/>\r\n      <geometry>\r\n        <sphere radius="0.01"/>\r\n      </geometry>\r\n      <material name="caster_color">\r\n        <color rgba="0.3 0.3 0.3 1"/>\r\n      </material>\r\n    </visual>\r\n    <collision>\r\n      <origin xyz="0 0 0" rpy="0 0 0"/>\r\n      <geometry>\r\n        <sphere radius="0.01"/>\r\n      </geometry>\r\n    </collision>\r\n  </link>\r\n\r\n  \x3c!-- Joint: Base to Left Wheel --\x3e\r\n  <joint name="left_wheel_joint" type="continuous">\r\n    <parent link="base_link"/>\r\n    <child link="left_wheel"/>\r\n    <origin xyz="0 0.075 -0.05" rpy="0 0 0"/>\r\n    <axis xyz="0 1 0"/>\r\n    <limit effort="10" velocity="2.0"/>\r\n    <dynamics damping="0.01" friction="0.0"/>\r\n  </joint>\r\n\r\n  \x3c!-- Joint: Base to Right Wheel --\x3e\r\n  <joint name="right_wheel_joint" type="continuous">\r\n    <parent link="base_link"/>\r\n    <child link="right_wheel"/>\r\n    <origin xyz="0 -0.075 -0.05" rpy="0 0 0"/>\r\n    <axis xyz="0 1 0"/>\r\n    <limit effort="10" velocity="2.0"/>\r\n    <dynamics damping="0.01" friction="0.0"/>\r\n  </joint>\r\n\r\n  \x3c!-- Joint: Base to Caster Wheel --\x3e\r\n  <joint name="caster_wheel_joint" type="fixed">\r\n    <parent link="base_link"/>\r\n    <child link="caster_wheel"/>\r\n    <origin xyz="0.09 0 -0.05" rpy="0 0 0"/>\r\n  </joint>\r\n\r\n</robot>\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Expected output"}),": A robot with body and three wheels, ready to spawn in Gazebo."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"code-example-spawn-in-gazebo-python",children:"Code Example: Spawn in Gazebo (Python)"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"File"}),": ",(0,s.jsx)(n.code,{children:"examples/chapter-2-gazebo/lesson-03/spawn_robot.py"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"#!/usr/bin/env python3\r\n\"\"\"\r\nSpawn differential drive robot in Gazebo\r\nSimulation environment: Gazebo 11+\r\n\"\"\"\r\n\r\nimport rclpy\r\nfrom gazebo_msgs.srv import SpawnEntity\r\nimport os\r\n\r\ndef spawn_robot():\r\n    rclpy.init()\r\n    node = rclpy.create_node('spawn_robot')\r\n\r\n    # Read URDF file\r\n    urdf_path = os.path.expanduser('~/differential-drive-robot.urdf')\r\n    with open(urdf_path, 'r') as f:\r\n        robot_xml = f.read()\r\n\r\n    # Create spawn client\r\n    client = node.create_client(SpawnEntity, '/spawn_entity')\r\n    while not client.wait_for_service(timeout_sec=1.0):\r\n        node.get_logger().info('Waiting for /spawn_entity service...')\r\n\r\n    # Prepare request\r\n    request = SpawnEntity.Request()\r\n    request.name = 'my_robot'\r\n    request.xml = robot_xml\r\n    request.robot_namespace = '/'\r\n    request.initial_pose.position.x = 0.0\r\n    request.initial_pose.position.y = 0.0\r\n    request.initial_pose.position.z = 0.5  # Spawn above ground\r\n\r\n    # Call service\r\n    future = client.call_async(request)\r\n    rclpy.spin_until_future_complete(node, future)\r\n\r\n    if future.result().success:\r\n        node.get_logger().info('Robot spawned successfully!')\r\n    else:\r\n        node.get_logger().error('Failed to spawn robot')\r\n\r\n    node.destroy_node()\r\n    rclpy.shutdown()\r\n\r\nif __name__ == '__main__':\r\n    spawn_robot()\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Usage"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Terminal 1: Start Gazebo\r\ngazebo\r\n\r\n# Terminal 2: Run spawn script\r\npython3 spawn_robot.py\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"layer-2-ai-collaboration-notes",children:"Layer 2: AI Collaboration Notes"}),"\n",(0,s.jsxs)(n.p,{children:["\ud83d\udcac ",(0,s.jsx)(n.strong,{children:"Prompt 1"}),": \"Why do we use 'continuous' joints for wheels instead of 'revolute'?\""]}),"\n",(0,s.jsx)(n.p,{children:"Claude explains:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"revolute"})," joints have min/max limits (typically \xb1\u03c0)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"continuous"})," joints allow unlimited rotation (like real wheels)"]}),"\n",(0,s.jsx)(n.li,{children:"Real wheels can spin indefinitely; limits don't make sense"}),"\n",(0,s.jsxs)(n.li,{children:["Use ",(0,s.jsx)(n.code,{children:"continuous"})," whenever you want unrestricted motion"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["\ud83d\udcac ",(0,s.jsx)(n.strong,{children:"Prompt 2"}),': "What\'s the difference between friction and damping? My robot slides too much\u2014which one should I tune?"']}),"\n",(0,s.jsx)(n.p,{children:"Claude explains:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Friction"}),": Resistance when sliding across a surface (wheel-ground)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Damping"}),": Internal resistance in the joint itself (motor bearing friction)"]}),"\n",(0,s.jsx)(n.li,{children:"Sliding wheels? Increase friction coefficient (0.9-1.0)"}),"\n",(0,s.jsx)(n.li,{children:"Spinning too freely? Increase damping (0.01-0.1)"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,s.jsx)(n.h3,{id:"problem-robot-doesnt-move-when-wheels-spin",children:"Problem: Robot doesn't move when wheels spin"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Cause"}),": Friction too low or wheel mass too high\r\n",(0,s.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:'\x3c!-- Increase friction --\x3e\r\n<friction value="1.0"/>  \x3c!-- In Gazebo world file --\x3e\r\n\r\n\x3c!-- Check wheel mass ratio --\x3e\r\n\x3c!-- Wheel mass should be 5-10% of base mass --\x3e\n'})}),"\n",(0,s.jsx)(n.h3,{id:"problem-robot-tips-over-easily",children:"Problem: Robot tips over easily"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Cause"}),": Wheels positioned too high or wheelbase too narrow\r\n",(0,s.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Lower wheel position (mount flush with base bottom)"}),"\n",(0,s.jsx)(n.li,{children:"Increase wheelbase (distance between left/right wheels)"}),"\n",(0,s.jsx)(n.li,{children:"Add caster wheel for support"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"problem-caster-wheel-gets-stuck-or-wobbles",children:"Problem: Caster wheel gets stuck or wobbles"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Cause"}),": Caster mounting too rigid or sphere radius wrong\r\n",(0,s.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:'\x3c!-- Use small caster wheel radius (~1-2 cm) --\x3e\r\n<sphere radius="0.01"/>\r\n\x3c!-- Use prismatic/continuous joint for caster, not fixed --\x3e\n'})}),"\n",(0,s.jsx)(n.h3,{id:"problem-urdf-model-robot-doesnt-have-inertial-element-in-root-link",children:"Problem: \"URDF model 'robot' doesn't have inertial element in root link\""}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Cause"}),": base_link missing inertial properties\r\n",(0,s.jsx)(n.strong,{children:"Solution"}),": Ensure base_link has ",(0,s.jsx)(n.code,{children:"<inertial>"})," with mass and inertia"]}),"\n",(0,s.jsx)(n.h3,{id:"problem-wheels-penetrate-ground-plane",children:"Problem: Wheels penetrate ground plane"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Cause"}),": Wheel origin too low or ground contact issue\r\n",(0,s.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:'\x3c!-- Wheel origin should be at wheel center --\x3e\r\n\x3c!-- If base is at z=0, wheels at z should be -radius --\x3e\r\n<origin xyz="0 0.075 -0.05"/>  \x3c!-- -0.05 = -0.1/2 (base height/2) --\x3e\n'})}),"\n",(0,s.jsx)(n.h3,{id:"problem-robot-spins-in-circles-instead-of-moving-straight",children:"Problem: Robot spins in circles instead of moving straight"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Cause"}),": Wheel masses or frictions unequal\r\n",(0,s.jsx)(n.strong,{children:"Solution"}),": Make left/right wheels identical; check both have same mass and friction"]}),"\n",(0,s.jsx)(n.h3,{id:"problem-cant-spawn-robotentity-already-exists",children:'Problem: Can\'t spawn robot\u2014"Entity already exists"'}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Cause"}),": Robot from previous spawn still in world\r\n",(0,s.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Delete previous robot\r\nros2 service call /delete_entity gazebo_msgs/DeleteEntity \"{name: 'my_robot'}\"\r\n\r\n# Then spawn new one\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"self-assessment-checklist",children:"Self-Assessment Checklist"}),"\n",(0,s.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","I can explain differential drive kinematics (how left/right wheel speeds create motion)"]}),"\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","I've created a complete URDF for a mobile robot with wheels"]}),"\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","My robot spawns in Gazebo without errors"]}),"\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","The robot sits on the ground plane (wheels touch, base doesn't penetrate)"]}),"\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","I understand how to calculate/set appropriate wheel mass and friction"]}),"\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","I can visualize the robot in RViz and see all links/joints correctly"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"key-takeaways",children:"Key Takeaways"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Differential drive is fundamental"}),": Two wheels enable all robot motion"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Mass distribution matters"}),": Wheel mass affects stability and control"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Friction is critical"}),": High friction (0.8-1.0) is essential for wheeled robots"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Caster wheels improve stability"}),": Free-rolling wheel prevents tipping"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"URDF + Gazebo = simulation"}),": Physics respects your robot design"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"next-lesson",children:"Next Lesson"}),"\n",(0,s.jsx)(n.p,{children:"In Lesson 4, you'll fine-tune physics parameters to make your robot behave exactly as designed."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"./lesson-04-physics-simulation.md",children:"Go to Lesson 4: Physics Simulation Tuning \u2192"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Lesson Status"}),": Complete with differential drive design, full URDF example, spawn script, and troubleshooting."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Duration"}),": 75 minutes (including RViz verification and Gazebo spawning)"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Files Created"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"examples/chapter-2-gazebo/lesson-03/differential-drive-robot.urdf"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"examples/chapter-2-gazebo/lesson-03/spawn_robot.py"})}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Concepts Covered"}),": 8 (mobile base design, differential drive kinematics, wheel configuration, base link positioning, caster wheels, joint controllers, physics for mobile robots, spawning in Gazebo)"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>t});var r=i(6540);const s={},l=r.createContext(s);function o(e){const n=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);