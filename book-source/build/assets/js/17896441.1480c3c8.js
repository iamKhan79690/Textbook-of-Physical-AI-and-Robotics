"use strict";(globalThis.webpackChunkai_book=globalThis.webpackChunkai_book||[]).push([[401],{2114:(e,n,t)=>{t.d(n,{A:()=>u});var r=t(6540),a=t(2005),s=t(5480);const i={translateContainer:"translateContainer_p5V4",translateButton:"translateButton_pSZd",active:"active_V9Y8",spinner:"spinner_nWWs",spin:"spin_AEHi",notAuthMessage:"notAuthMessage_gyQm",error:"error_GMos",dismissButton:"dismissButton_OXq4",translatedContent:"translatedContent_I6uX",fadeIn:"fadeIn_c1wO",translationHeader:"translationHeader_NFQ1",translationNote:"translationNote_f7Lm",translationText:"translationText_qEYy"};var o=t(4848);function l({pageContent:e,pageTitle:n}){const{data:t,isPending:a}=(0,s.wV)(),[l,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(null),[h,m]=(0,r.useState)(!1),[p,g]=(0,r.useState)(null);if(a)return null;if(!t?.user)return(0,o.jsx)("div",{className:i.notAuthMessage,children:(0,o.jsxs)("p",{children:["\ud83d\udd12 Please ",(0,o.jsx)("a",{href:"/signin",children:"sign in"})," to access Urdu translation"]})});return(0,o.jsxs)("div",{className:i.translateContainer,children:[(0,o.jsx)("button",{onClick:async()=>{if(d&&h)m(!1);else if(d)m(!0);else{c(!0),g(null);try{let t="";const r=["article.theme-doc-markdown","article",".markdown","main article",'[class*="docItemContainer"]'];for(const e of r){const n=document.querySelector(e);if(n?.textContent?.trim()){t=n.textContent.trim();break}}if(!t&&e&&(t=e),!t||t.length<10)throw new Error("No content found to translate. Please make sure you're on a documentation page.");const a=await fetch("http://localhost:8000/translate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:t.substring(0,5e3),target_language:"urdu",title:n||document.title})});if(!a.ok)throw new Error("Translation failed");const s=await a.json();u(s.translated_text),m(!0)}catch(t){g(t instanceof Error?t.message:"Translation failed"),console.error("Translation error:",t)}finally{c(!1)}}},disabled:l,className:`${i.translateButton} ${h?i.active:""}`,children:l?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{className:i.spinner,children:"\u23f3"})," Translating to Urdu..."]}):h?(0,o.jsx)(o.Fragment,{children:"\ud83d\udcd6 Show Original (English)"}):(0,o.jsx)(o.Fragment,{children:"\ud83c\udf10 Translate to Urdu (\u0627\u0631\u062f\u0648)"})}),p&&(0,o.jsxs)("div",{className:i.error,children:[(0,o.jsxs)("p",{children:["\u274c ",p]}),(0,o.jsx)("button",{onClick:()=>g(null),className:i.dismissButton,children:"Dismiss"})]}),h&&d&&(0,o.jsxs)("div",{className:i.translatedContent,children:[(0,o.jsxs)("div",{className:i.translationHeader,children:[(0,o.jsx)("h3",{children:"\ud83d\udcdd Urdu Translation (\u0627\u0631\u062f\u0648 \u062a\u0631\u062c\u0645\u06c1)"}),(0,o.jsx)("p",{className:i.translationNote,children:"AI-generated translation. For accuracy, refer to the original English text."})]}),(0,o.jsx)("div",{className:i.translationText,dir:"rtl",lang:"ur",children:d})]})]})}const c={personalizeContainer:"personalizeContainer_mKTl",personalizeButton:"personalizeButton_Ske9",active:"active_vwkD",spinner:"spinner_cZ2L",pulse:"pulse_eqil",personalizedContent:"personalizedContent_gV3q",fadeIn:"fadeIn_Pptz",header:"header_LtxX",note:"note_lCWt",content:"content_prhQ",error:"error_cSyr",dismissButton:"dismissButton_v_Gi"};function d({pageContent:e,pageTitle:n}){const{data:t,isPending:a}=(0,s.wV)(),[i,l]=(0,r.useState)(!1),[d,u]=(0,r.useState)(null),[h,m]=(0,r.useState)(!1),[p,g]=(0,r.useState)(null);if(a)return null;if(!t?.user)return null;return(0,o.jsxs)("div",{className:c.personalizeContainer,children:[(0,o.jsx)("button",{onClick:async()=>{if(d&&h)m(!1);else if(d)m(!0);else{l(!0),g(null);try{let r="";const a=["article.theme-doc-markdown","article",".markdown","main article",'[class*="docItemContainer"]'];for(const e of a){const n=document.querySelector(e);if(n?.textContent?.trim()){r=n.textContent.trim();break}}if(!r&&e&&(r=e),!r||r.length<10)throw new Error("No content found to personalize.");const s=await fetch("http://localhost:8000/personalize",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:r.substring(0,5e3),user_profile:{softwareBackground:t.user.softwareBackground,hardwareExperience:t.user.hardwareExperience,learningGoals:t.user.learningGoals,hasRoboticsExperience:t.user.hasRoboticsExperience},title:n||document.title})});if(!s.ok)throw new Error("Personalization failed");const i=await s.json();u(i.personalized_text),m(!0)}catch(r){g(r instanceof Error?r.message:"Personalization failed"),console.error("Personalization error:",r)}finally{l(!1)}}},disabled:i,className:`${c.personalizeButton} ${h?c.active:""}`,children:i?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{className:c.spinner,children:"\u2728"})," Personalizing..."]}):h?(0,o.jsx)(o.Fragment,{children:"\u21a9\ufe0f Show Original"}):(0,o.jsx)(o.Fragment,{children:"\u2728 Personalize for Me"})}),p&&(0,o.jsxs)("div",{className:c.error,children:[(0,o.jsxs)("p",{children:["\u274c ",p]}),(0,o.jsx)("button",{onClick:()=>g(null),className:c.dismissButton,children:"Dismiss"})]}),h&&d&&(0,o.jsxs)("div",{className:c.personalizedContent,children:[(0,o.jsxs)("div",{className:c.header,children:[(0,o.jsx)("h3",{children:"\u2728 Personalized Content"}),(0,o.jsxs)("p",{className:c.note,children:["Adapted for your profile:",t.user.softwareBackground&&` ${t.user.softwareBackground} Software`,t.user.hardwareExperience&&` \u2022 ${t.user.hardwareExperience} Hardware`]})]}),(0,o.jsx)("div",{className:c.content,children:d.split("\n").map((e,n)=>(0,o.jsx)("p",{children:e},n))})]})]})}function u(e){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:"12px",marginBottom:"24px",alignItems:"center"},children:[(0,o.jsx)(l,{}),(0,o.jsx)(d,{})]}),(0,o.jsx)(a.A,{...e})]})}},5480:(e,n,t)=>{t.d(n,{Hh:()=>i,Jv:()=>o,wV:()=>l});var r=t(6540);const a=()=>{if("undefined"==typeof window)return null;const e=localStorage.getItem("mock_user");return e?JSON.parse(e):null},s=e=>{"undefined"!=typeof window&&(e?localStorage.setItem("mock_user",JSON.stringify(e)):localStorage.removeItem("mock_user"))},i={email:async e=>{const n={id:Math.random().toString(36).substring(7),name:e.name,email:e.email,softwareBackground:e.softwareBackground,hardwareExperience:e.hardwareExperience,learningGoals:e.learningGoals,hasRoboticsExperience:e.hasRoboticsExperience};return s(n),{user:n,error:null}}},o={email:async e=>{const n=a();if(n&&n.email===e.email)return{user:n,error:null};const t={id:Math.random().toString(36).substring(7),name:e.email.split("@")[0],email:e.email};return s(t),{user:t,error:null}}},l=()=>{const[e,n]=r.useState(a);return r.useEffect(()=>{n(a())},[]),{data:{user:e},isPending:!1}}}}]);