"use strict";(globalThis.webpackChunkai_book=globalThis.webpackChunkai_book||[]).push([[239],{8453:(e,n,i)=>{i.d(n,{R:()=>t,x:()=>l});var r=i(6540);const s={},o=r.createContext(s);function t(e){const n=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),r.createElement(o.Provider,{value:n},e.children)}},8693:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>t,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"Gazebo-Simulation/physics-simulation","title":"Lesson 4: Physics Simulation Tuning","description":"Understand and fine-tune physics parameters for realistic robot behavior","source":"@site/docs/03-Gazebo-Simulation/04-physics-simulation.md","sourceDirName":"03-Gazebo-Simulation","slug":"/Gazebo-Simulation/physics-simulation","permalink":"/docs/Gazebo-Simulation/physics-simulation","draft":false,"unlisted":false,"editUrl":"https://github.com/your-org/ai-book/tree/main/docs/03-Gazebo-Simulation/04-physics-simulation.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5,"title":"Lesson 4: Physics Simulation Tuning","description":"Understand and fine-tune physics parameters for realistic robot behavior"},"sidebar":"tutorialSidebar","previous":{"title":"Lesson 3: Building Your First Robot","permalink":"/docs/Gazebo-Simulation/building-robot"},"next":{"title":"Lesson 5: Adding Sensors","permalink":"/docs/Gazebo-Simulation/adding-sensors"}}');var s=i(4848),o=i(8453);const t={sidebar_position:5,title:"Lesson 4: Physics Simulation Tuning",description:"Understand and fine-tune physics parameters for realistic robot behavior"},l="Lesson 4: Physics Simulation Tuning (75 minutes)",a={},c=[{value:"Learning Outcomes",id:"learning-outcomes",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Core Concepts (8 Total)",id:"core-concepts-8-total",level:2},{value:"1. Gravity",id:"1-gravity",level:3},{value:"2. Static Friction",id:"2-static-friction",level:3},{value:"3. Dynamic Friction (Sliding Friction)",id:"3-dynamic-friction-sliding-friction",level:3},{value:"4. Linear Damping",id:"4-linear-damping",level:3},{value:"5. Angular Damping",id:"5-angular-damping",level:3},{value:"6. Restitution (Bounciness)",id:"6-restitution-bounciness",level:3},{value:"7. Contact Margin",id:"7-contact-margin",level:3},{value:"8. Physics Engine Selection",id:"8-physics-engine-selection",level:3},{value:"Physics Parameter Reference Guide",id:"physics-parameter-reference-guide",level:2},{value:"For Mobile Robots (Wheels)",id:"for-mobile-robots-wheels",level:3},{value:"For Manipulators (Arm Joints)",id:"for-manipulators-arm-joints",level:3},{value:"For Soft Bodies (Grippers)",id:"for-soft-bodies-grippers",level:3},{value:"Layer 1: Manual Tuning Exercise",id:"layer-1-manual-tuning-exercise",level:2},{value:"Exercise: Make Robot Move Exactly 1 Meter",id:"exercise-make-robot-move-exactly-1-meter",level:3},{value:"Code Example: Physics-Tuned Robot URDF",id:"code-example-physics-tuned-robot-urdf",level:2},{value:"Layer 2: AI Collaboration Notes",id:"layer-2-ai-collaboration-notes",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Problem: Simulation runs in slow motion",id:"problem-simulation-runs-in-slow-motion",level:3},{value:"Problem: Objects shake or vibrate excessively",id:"problem-objects-shake-or-vibrate-excessively",level:3},{value:"Problem: Robot drifts to one side",id:"problem-robot-drifts-to-one-side",level:3},{value:"Problem: &quot;Real time factor dropping below 1.0&quot;",id:"problem-real-time-factor-dropping-below-10",level:3},{value:"Problem: Can&#39;t get robot to move exactly 1 meter",id:"problem-cant-get-robot-to-move-exactly-1-meter",level:3},{value:"Self-Assessment Checklist",id:"self-assessment-checklist",level:2},{value:"Key Takeaways",id:"key-takeaways",level:2},{value:"Next Lesson",id:"next-lesson",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"lesson-4-physics-simulation-tuning-75-minutes",children:"Lesson 4: Physics Simulation Tuning (75 minutes)"})}),"\n",(0,s.jsx)(n.h2,{id:"learning-outcomes",children:"Learning Outcomes"}),"\n",(0,s.jsx)(n.p,{children:"By the end of this lesson, you will:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Understand gravity, friction, and damping and their physical meanings"}),"\n",(0,s.jsx)(n.li,{children:"Tune physics parameters to achieve specified robot behavior"}),"\n",(0,s.jsx)(n.li,{children:"Diagnose and fix physics instability (bouncing, extreme oscillation)"}),"\n",(0,s.jsx)(n.li,{children:"Predict how parameter changes affect robot motion"}),"\n",(0,s.jsx)(n.li,{children:"Achieve realistic simulation-to-reality correspondence"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Lesson 3 completed (differential drive robot)"}),"\n",(0,s.jsx)(n.li,{children:"Basic understanding of forces and motion"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"core-concepts-8-total",children:"Core Concepts (8 Total)"}),"\n",(0,s.jsx)(n.h3,{id:"1-gravity",children:"1. Gravity"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Default"}),": 9.81 m/s\xb2 (Earth gravity)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Effect"}),": Constant downward force on all objects"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Tuning"}),": Usually left at 9.81; changing simulates other planets"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Physics"}),": F = m \xd7 g (heavier objects experience proportionally more gravity force)"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"2-static-friction",children:"2. Static Friction"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Definition"}),": Resistance to motion when object is stationary"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Range"}),": 0.0 to 2.0 (most robots use 0.5-1.0)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Effect"}),": Determines how much force needed to start sliding"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Example"}),": \u03bc_static = 0.9 means object needs 90% of its weight in horizontal force to start sliding"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"3-dynamic-friction-sliding-friction",children:"3. Dynamic Friction (Sliding Friction)"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Definition"}),": Resistance to motion when object is already sliding"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Range"}),": 0.0 to 2.0 (usually slightly less than static)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Effect"}),": Slows sliding motion after object starts moving"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Example"}),": Robot wheels with high friction (0.9) create strong traction"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"4-linear-damping",children:"4. Linear Damping"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Definition"}),": Internal energy loss in joints (air resistance, bearing friction)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Range"}),": 0.0 to 1.0 (most use 0.01-0.1)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Effect"}),": Slows movement over time (viscous drag)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Analogy"}),": Moving through honey is more damped than moving through air"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"5-angular-damping",children:"5. Angular Damping"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Definition"}),": Energy loss in rotational motion"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Range"}),": 0.0 to 1.0 (typical 0.01-0.1)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Effect"}),": Stops spinning over time"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Use case"}),": Joint motors have internal damping preventing wild oscillations"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"6-restitution-bounciness",children:"6. Restitution (Bounciness)"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Definition"}),": Energy returned after collision"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Range"}),": 0.0 (dead bounce, no rebound) to 1.0 (perfect elastic bounce)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Effect"}),": 0.0 = objects stick to ground; 1.0 = balls bounce forever"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Typical"}),": Robots use 0.0-0.1 (almost no bounce for stability)"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"7-contact-margin",children:"7. Contact Margin"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Definition"}),": Threshold distance at which contact is detected"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Range"}),": 0.0001 to 0.01 m (tiny values important)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Effect"}),": Prevents jittering and false collisions"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Tuning"}),": Too small = missed collisions; too large = objects hover above ground"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"8-physics-engine-selection",children:"8. Physics Engine Selection"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"ODE"}),": Default, fast, good for wheels"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Bullet"}),": Better collision handling"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"DART"}),": Most accurate but slowest"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"physics-parameter-reference-guide",children:"Physics Parameter Reference Guide"}),"\n",(0,s.jsx)(n.h3,{id:"for-mobile-robots-wheels",children:"For Mobile Robots (Wheels)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:'\x3c!-- Gazebo world file physics section --\x3e\r\n<physics type="ode">\r\n  <max_step_size>0.001</max_step_size>       \x3c!-- 1 ms simulation step --\x3e\r\n  <real_time_factor>1.0</real_time_factor>   \x3c!-- Real-time speed --\x3e\r\n  <real_time_update_rate>1000</real_time_update_rate>\r\n  <ode>\r\n    <solver>\r\n      <type>quick</type>\r\n      <iters>50</iters>  \x3c!-- More iterations = more stable but slower --\x3e\r\n    </solver>\r\n  </ode>\r\n</physics>\r\n\r\n\x3c!-- Wheel friction (high for traction) --\x3e\r\n<surface>\r\n  <friction>\r\n    <ode>\r\n      <mu>0.9</mu>      \x3c!-- Static friction --\x3e\r\n      <mu2>0.9</mu2>    \x3c!-- Dynamic friction --\x3e\r\n    </ode>\r\n  </friction>\r\n  <contact>\r\n    <ode>\r\n      <soft_cfm>0.0</soft_cfm>\r\n      <soft_erp>0.2</soft_erp>\r\n      <kp>10000000</kp>  \x3c!-- Contact stiffness --\x3e\r\n      <kd>1</kd>         \x3c!-- Contact damping --\x3e\r\n    </ode>\r\n  </contact>\r\n</surface>\n'})}),"\n",(0,s.jsx)(n.h3,{id:"for-manipulators-arm-joints",children:"For Manipulators (Arm Joints)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:'\x3c!-- Low friction for smooth motion --\x3e\r\n<friction>\r\n  <ode>\r\n    <mu>0.3</mu>\r\n    <mu2>0.3</mu2>\r\n  </ode>\r\n</friction>\r\n\r\n\x3c!-- Damping prevents oscillation --\x3e\r\n<dynamics damping="0.1" friction="0.05"/>\n'})}),"\n",(0,s.jsx)(n.h3,{id:"for-soft-bodies-grippers",children:"For Soft Bodies (Grippers)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:"\x3c!-- High restitution not needed --\x3e\r\n<contact>\r\n  <ode>\r\n    <restitution>0.0</restitution>  \x3c!-- No bounce --\x3e\r\n    <soft_cfm>0.3</soft_cfm>        \x3c!-- Soft contact --\x3e\r\n  </ode>\r\n</contact>\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"layer-1-manual-tuning-exercise",children:"Layer 1: Manual Tuning Exercise"}),"\n",(0,s.jsx)(n.h3,{id:"exercise-make-robot-move-exactly-1-meter",children:"Exercise: Make Robot Move Exactly 1 Meter"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Setup"}),": Place your differential drive robot in Gazebo"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Goal"}),": Apply command that makes robot move exactly 1.0 meter forward, then stop"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Method"}),":","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Observe current behavior (too fast? too slow? drifts?)"}),"\n",(0,s.jsx)(n.li,{children:"Adjust friction or damping"}),"\n",(0,s.jsx)(n.li,{children:"Repeat until behavior matches goal"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Steps"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# Terminal 1: Gazebo with your robot\r\ngazebo\r\n\r\n# Terminal 2: Send Twist command (forward motion)\r\nros2 topic pub --once /cmd_vel geometry_msgs/Twist "{linear: {x: 0.5, y: 0.0, z: 0.0}, angular: {x: 0.0, y: 0.0, z: 0.0}}"\r\n\r\n# Terminal 3: Monitor odometry to measure distance\r\nros2 topic echo /odom | grep -A2 position\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"code-example-physics-tuned-robot-urdf",children:"Code Example: Physics-Tuned Robot URDF"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"File"}),": ",(0,s.jsx)(n.code,{children:"examples/chapter-2-gazebo/lesson-04/differential-drive-tuned.urdf"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0"?>\r\n<robot name="differential_drive_robot_tuned">\r\n  \x3c!-- Simulation environment: Gazebo 11+ --\x3e\r\n\r\n  <link name="base_link">\r\n    <inertial>\r\n      <mass value="5.0"/>\r\n      <inertia ixx="0.5" ixy="0" ixz="0"\r\n               iyy="0.5" iyz="0" izz="0.4"/>\r\n    </inertial>\r\n    <visual>\r\n      <geometry><box size="0.2 0.15 0.1"/></geometry>\r\n      <material name="base_color">\r\n        <color rgba="0.7 0.7 0.7 1"/>\r\n      </material>\r\n    </visual>\r\n    <collision>\r\n      <geometry><box size="0.2 0.15 0.1"/></geometry>\r\n    </collision>\r\n  </link>\r\n\r\n  <link name="left_wheel">\r\n    <inertial>\r\n      <mass value="0.3"/>\r\n      <inertia ixx="0.01" ixy="0" ixz="0"\r\n               iyy="0.01" iyz="0" izz="0.01"/>\r\n    </inertial>\r\n    <visual>\r\n      <geometry>\r\n        <cylinder radius="0.05" length="0.05"/>\r\n      </geometry>\r\n      <material name="wheel_color">\r\n        <color rgba="0.2 0.2 0.2 1"/>\r\n      </material>\r\n    </visual>\r\n    <collision>\r\n      <geometry>\r\n        <cylinder radius="0.05" length="0.05"/>\r\n      </geometry>\r\n    </collision>\r\n  </link>\r\n\r\n  <link name="right_wheel">\r\n    <inertial>\r\n      <mass value="0.3"/>\r\n      <inertia ixx="0.01" ixy="0" ixz="0"\r\n               iyy="0.01" iyz="0" izz="0.01"/>\r\n    </inertial>\r\n    <visual>\r\n      <geometry>\r\n        <cylinder radius="0.05" length="0.05"/>\r\n      </geometry>\r\n      <material name="wheel_color"/>\r\n    </visual>\r\n    <collision>\r\n      <geometry>\r\n        <cylinder radius="0.05" length="0.05"/>\r\n      </geometry>\r\n    </collision>\r\n  </link>\r\n\r\n  <link name="caster_wheel">\r\n    <inertial>\r\n      <mass value="0.1"/>\r\n      <inertia ixx="0.001" ixy="0" ixz="0"\r\n               iyy="0.001" iyz="0" izz="0.001"/>\r\n    </inertial>\r\n    <visual>\r\n      <geometry><sphere radius="0.01"/></geometry>\r\n      <material name="caster_color">\r\n        <color rgba="0.3 0.3 0.3 1"/>\r\n      </material>\r\n    </visual>\r\n    <collision>\r\n      <geometry><sphere radius="0.01"/></geometry>\r\n    </collision>\r\n  </link>\r\n\r\n  \x3c!-- Left Wheel Joint (with optimized physics) --\x3e\r\n  <joint name="left_wheel_joint" type="continuous">\r\n    <parent link="base_link"/>\r\n    <child link="left_wheel"/>\r\n    <origin xyz="0 0.075 -0.05" rpy="0 0 0"/>\r\n    <axis xyz="0 1 0"/>\r\n    <limit effort="10" velocity="2.0"/>\r\n    <dynamics damping="0.01" friction="0.0"/>  \x3c!-- Low joint damping, friction handled by contact --\x3e\r\n  </joint>\r\n\r\n  \x3c!-- Right Wheel Joint (symmetric) --\x3e\r\n  <joint name="right_wheel_joint" type="continuous">\r\n    <parent link="base_link"/>\r\n    <child link="right_wheel"/>\r\n    <origin xyz="0 -0.075 -0.05" rpy="0 0 0"/>\r\n    <axis xyz="0 1 0"/>\r\n    <limit effort="10" velocity="2.0"/>\r\n    <dynamics damping="0.01" friction="0.0"/>\r\n  </joint>\r\n\r\n  \x3c!-- Caster Wheel Joint --\x3e\r\n  <joint name="caster_wheel_joint" type="fixed">\r\n    <parent link="base_link"/>\r\n    <child link="caster_wheel"/>\r\n    <origin xyz="0.09 0 -0.05" rpy="0 0 0"/>\r\n  </joint>\r\n\r\n  \x3c!-- Gazebo physics tuning (this would typically be in world file) --\x3e\r\n  <gazebo>\r\n    <physics type="ode">\r\n      <max_step_size>0.001</max_step_size>\r\n      <real_time_update_rate>1000</real_time_update_rate>\r\n    </physics>\r\n\r\n    \x3c!-- High friction on wheels for traction --\x3e\r\n    <gazebo reference="left_wheel">\r\n      <surface>\r\n        <friction>\r\n          <ode>\r\n            <mu>0.9</mu>\r\n            <mu2>0.9</mu2>\r\n          </ode>\r\n        </friction>\r\n      </surface>\r\n    </gazebo>\r\n\r\n    <gazebo reference="right_wheel">\r\n      <surface>\r\n        <friction>\r\n          <ode>\r\n            <mu>0.9</mu>\r\n            <mu2>0.9</mu2>\r\n          </ode>\r\n        </friction>\r\n      </surface>\r\n    </gazebo>\r\n\r\n    \x3c!-- Lower friction on caster for free rolling --\x3e\r\n    <gazebo reference="caster_wheel">\r\n      <surface>\r\n        <friction>\r\n          <ode>\r\n            <mu>0.1</mu>\r\n            <mu2>0.1</mu2>\r\n          </ode>\r\n        </friction>\r\n      </surface>\r\n    </gazebo>\r\n  </gazebo>\r\n\r\n</robot>\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"layer-2-ai-collaboration-notes",children:"Layer 2: AI Collaboration Notes"}),"\n",(0,s.jsxs)(n.p,{children:["\ud83d\udcac ",(0,s.jsx)(n.strong,{children:"Prompt 1"}),': "My robot oscillates (shakes) after stopping. Is that friction or damping?"']}),"\n",(0,s.jsx)(n.p,{children:"Claude explains:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Oscillation = underdamped spring-like behavior"}),"\n",(0,s.jsxs)(n.li,{children:["Increase ",(0,s.jsx)(n.strong,{children:"damping"})," to absorb energy: ",(0,s.jsx)(n.code,{children:'<dynamics damping="0.1"/>'})]}),"\n",(0,s.jsxs)(n.li,{children:["Check ",(0,s.jsx)(n.strong,{children:"contact stiffness"})," in Gazebo physics (kp parameter)"]}),"\n",(0,s.jsx)(n.li,{children:"Also ensure friction is high enough (0.7+)"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["\ud83d\udcac ",(0,s.jsx)(n.strong,{children:"Prompt 2"}),': "When should I tune physics vs. tuning my control algorithm?"']}),"\n",(0,s.jsx)(n.p,{children:"Claude explains:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"First"}),": Get physics right (realistic simulation)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Then"}),": Tune control algorithms to handle that physics"]}),"\n",(0,s.jsx)(n.li,{children:"Bad physics \u2192 even perfect control looks bad"}),"\n",(0,s.jsx)(n.li,{children:"Good physics + simple control \u2192 realistic behavior"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,s.jsx)(n.h3,{id:"problem-simulation-runs-in-slow-motion",children:"Problem: Simulation runs in slow motion"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Cause"}),": ",(0,s.jsx)(n.code,{children:"max_step_size"})," too small or ",(0,s.jsx)(n.code,{children:"real_time_factor"})," set wrong\r\n",(0,s.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-xml",children:"<max_step_size>0.001</max_step_size>  \x3c!-- 1 ms default --\x3e\r\n<real_time_factor>1.0</real_time_factor>  \x3c!-- Keep at 1.0 for real-time --\x3e\n"})}),"\n",(0,s.jsx)(n.h3,{id:"problem-objects-shake-or-vibrate-excessively",children:"Problem: Objects shake or vibrate excessively"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Cause"}),": Contact stiffness too high or solver not converged\r\n",(0,s.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Reduce kp (contact stiffness)"}),"\n",(0,s.jsx)(n.li,{children:"Increase ODE solver iterations (iters: 50 \u2192 100)"}),"\n",(0,s.jsx)(n.li,{children:"Increase damping on objects"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"problem-robot-drifts-to-one-side",children:"Problem: Robot drifts to one side"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Cause"}),": Unequal friction or mass between left/right wheels\r\n",(0,s.jsx)(n.strong,{children:"Solution"}),": Ensure wheels are identical (same mass, friction, radius)"]}),"\n",(0,s.jsx)(n.h3,{id:"problem-real-time-factor-dropping-below-10",children:'Problem: "Real time factor dropping below 1.0"'}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Cause"}),": Simulation complexity too high for system performance\r\n",(0,s.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Reduce solver iterations"}),"\n",(0,s.jsx)(n.li,{children:"Remove unnecessary collision meshes"}),"\n",(0,s.jsx)(n.li,{children:"Disable unnecessary plugins"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"problem-cant-get-robot-to-move-exactly-1-meter",children:"Problem: Can't get robot to move exactly 1 meter"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Cause"}),": Wheel slip, incorrect friction, or control loop not tuned\r\n",(0,s.jsx)(n.strong,{children:"Solution"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"First ensure high friction (0.8-1.0)"}),"\n",(0,s.jsx)(n.li,{children:"Then tune motor command strength"}),"\n",(0,s.jsx)(n.li,{children:"Finally implement closed-loop control with odometry feedback"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"self-assessment-checklist",children:"Self-Assessment Checklist"}),"\n",(0,s.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","I understand how gravity, friction, and damping affect robot motion"]}),"\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","I can predict behavior changes before adjusting parameters"]}),"\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","I've tuned my robot to move more realistically"]}),"\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","I can diagnose oscillation vs. drift issues"]}),"\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","I understand friction coefficients and typical ranges"]}),"\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","I know how to tune Gazebo physics settings (solver, step size)"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"key-takeaways",children:"Key Takeaways"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Physics tuning is iterative"}),": Start with defaults, adjust based on observations"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Friction \u2260 Damping"}),": Friction is contact resistance; damping is energy loss"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"High friction for wheels"}),": 0.8-1.0 prevents slipping"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Low damping in joints"}),": 0.01-0.05 allows smooth motion"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Stability requires iteration"}),': No universal "perfect" settings']}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"next-lesson",children:"Next Lesson"}),"\n",(0,s.jsx)(n.p,{children:"In Lesson 5, you'll add sensors to your robot so it can perceive its environment."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.a,{href:"./lesson-05-adding-sensors.md",children:"Go to Lesson 5: Adding Sensors \u2192"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Lesson Status"}),": Complete with physics parameters guide, tuning exercise, optimized robot URDF, and troubleshooting."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Duration"}),": 75 minutes (including tuning iteration)"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Files Created"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"examples/chapter-2-gazebo/lesson-04/differential-drive-tuned.urdf"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"examples/chapter-2-gazebo/lesson-04/physics-parameter-ranges.txt"})}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Concepts Covered"}),": 8 (gravity, static friction, dynamic friction, linear damping, angular damping, restitution, contact margin, physics engine selection)"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);